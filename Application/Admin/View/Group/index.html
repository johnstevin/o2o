<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>{$meta_title}</title>
    <link rel="stylesheet" href="__STATIC__/bootstrap/css/bootstrap.min.css"/>
    <script type="text/javascript" src="__STATIC__/js/jquery.min.js"></script>
    <script>
        var arrTree = jQuery.parseJSON('{$_list|json_encode}');
        $(document).ready(function () {
            var str = '';

            function digui(list, level) {
                var level = level ? level : 0,prefix = '';
                for(i=0;i<level;i++){
                    if(i==0 && level == 1){
                        prefix += '&nbsp;&nbsp;&nbsp;&nbsp;|__';
                    }else if(i==0 &&  level > 1){
                        for(j=0;j<level;j++){
                            prefix += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                        }
                        prefix += '|';
                    }else {
                        prefix += '_';
                    }
                }
                $.each(list, function (k, v) {
                    str += '<tr>' +
                    '<td>'+prefix+'<a href="{:U("edit")}&id='+ v.id+'&pid='+ v.pid+'">'+v.title+'</a></td>' +
                    '<td><a href="{:U("add")}&pid='+ v.id+'">添加子分类</a></td>' +
                    '<td>'+ v.description+'</td>' +
                    '<td>'+v.status+'</td>'+
                    '<td><a href="{:U("edit")}&id='+ v.id+'&pid='+ v.pid+'">编辑&nbsp;&nbsp;</a>'+
                    '<a href="{:U("Group/changeStatus")}&method=forbid&id='+ v.id+'">禁用&nbsp;&nbsp;</a>'+
                    '<a href="{:U("Group/changeStatus")}&method=resume&id='+ v.id+'">启用&nbsp;&nbsp;</a>'+
                    '<a href="{:U("Group/changeStatus")}&method=delete&id='+ v.id+'">删除</a></td>'+
                    '</tr>';
                    if (v._child) {
                        digui(v._child, level + 1);
                    }
                })
            }
            digui(arrTree);
            $('#tree').after(str)
        });
    </script>
</head>
<body>
<div class="container-fluid">
    <!-- 标题栏 -->
    <div>
        <h2>组织管理</h2>
    </div>
    <!-- 操作  -->
    <div>
        <a id="add-group" class="btn btn-success" href="{:U('add')}">新 增</a>
        <!--<a id="edit-group" class="btn btn-info" href="{:U('edit')}">编 辑</a>-->
        <!--<a id="remove-group" class="btn btn-warning" href="{:U('remove')}">删 除</a>-->
    </div>
    <table class="table table-striped table-hover">
        <tr id="tree">
            <!--<th class="row-selected row-selected"><input class="check-all" type="checkbox"/></th>-->
            <th>用户组</th>
            <th>添加子分类</th>
            <th>描述</th>
            <th>状态</th>
            <th>操作</th>
        </tr>
    </table>
    <div class="page">
        <nav>
            <ul class="pagination">
                {$_page}
            </ul>
        </nav>
    </div>
</div>
</body>
</html>