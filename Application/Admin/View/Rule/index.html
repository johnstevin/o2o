
    <script>
        var arrTree = $.parseJSON('{$_list|json_encode}');
            var str = '';
            function digui(list, level) {
                var level = level ? level : 0,prefix = '';
                for(i=0;i<level;i++){
                    if(i==0 && level == 1){
                        prefix += '&nbsp;&nbsp;&nbsp;&nbsp;|__';
                    }else if(i==0 &&  level > 1){
                        for(j=0;j<level;j++){
                            prefix += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                        }
                        prefix += '|';
                    }else {
                        prefix += '_';
                    }
                }
                $.each(list, function (k, v) {
                    str += '<tr>' +
                    '<td>'+prefix+'<a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("edit")}&id='+ v.id+'&pid='+ v.pid+'">'+v.title+'</a></td>' +
                    '<td><a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("add")}&pid='+ v.id+'">添加子分类</a></td>' +
                    '<td>'+v.url+'</td>'+
                    '<td>'+v.status_text+'</td>'+
                    '<td><a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("edit")}&id='+ v.id+'&pid='+ v.pid+'">编辑</a>&nbsp;&nbsp;'+
                    '<a class=" ajax-get" href="{:U("Rule/changeStatus")}&method=forbid&id='+ v.id+'">禁用</a>&nbsp;&nbsp;'+
                    '<a class=" ajax-get" href="{:U("Rule/changeStatus")}&method=resume&id='+ v.id+'">启用</a>&nbsp;&nbsp;'+
                    '<a class="confirm ajax-get" href="{:U("Rule/changeStatus")}&method=delete&id='+ v.id+'">删除</a></td>&nbsp;&nbsp;'+
                    '</tr>';
                    if (v._child) {
                        digui(v._child, level + 1);
                    }
                })
            }
            digui(arrTree);
            $('#tree').after(str);

             baseJs();
    </script>


    <!-- 操作  -->
    <div>
        <a id="add-group" class="btn btn-success"  href="{:U('add')}" data-backdrop="false" data-toggle="modal" data-target="#DlgModal">新 增</a>
    </div>
    <div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead>
        <tr id="tree">
            <!--<th class="row-selected row-selected"><input class="check-all" type="checkbox"/></th>-->
            <th>标题</th>
            <th>添加子分类</th>
            <th>资源</th>
            <th>状态</th>
            <th>操作</th>
        </tr>
        </thead>
    </table>
        </div>
    <div class="page">
        <nav>
            <ul class="pagination">
                {$_page}
            </ul>
        </nav>
    </div>
