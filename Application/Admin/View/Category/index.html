
    <div>
        <a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" id="add-category" class="btn btn-success"
           href="{:U('add')}">新 增</a>
    </div>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
            <tr id="table-header">
                <th>名称</th>
                <th>添加子分类</th>
                <th>描述</th>
                <th>状态</th>
                <th class="text-center">关联</th>
                <th class="text-center">操作</th>
            </tr>
            </thead>
        </table>
    </div>
<script>
    var arrTree = jQuery.parseJSON('{$tree|json_encode}');
    var string = '';

    function digui(list, level) {
        var level = level ? level : 0, prefix = '';
        for (i = 0; i < level; i++) {
            if (i == 0 && level == 1) {
                prefix += '&nbsp;&nbsp;&nbsp;&nbsp;|__';
            } else if (i == 0 && level > 1) {
                for (j = 0; j < level; j++) {
                    prefix += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                }
                prefix += '|';
            } else {
                prefix += '_';
            }
        }
        $.each(list, function (k, v) {
            string += '<tr>' +
//                '<td> + </td><td>' + v.id + '</td>' +
//                '<td>' + v.sort + '</td>' +
            '<td>' + prefix + '<a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("edit")}&id=' + v.id + '&pid=' + v.pid + '">' + v.title + '</a></td>' +

            '<td><a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("add")}&pid=' + v.id + '">增加子分类</a> </td>' +
            '<td>' + v.description + '</td>' +
            '<td>' + v.status_text + '</td>' +
            '<td class="text-center"><a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("relationBrand")}&id=' + v.id + '">关联品牌</a>&nbsp;&nbsp;&nbsp;&nbsp;' +
            '<a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("relationNorm")}&id=' + v.id + '">关联规格</a></td>&nbsp;&nbsp;' +
            '<td class="text-center">' + '<a data-backdrop="false" data-toggle="modal" data-target="#DlgModal" href="{:U("edit")}&id=' + v.id + '&pid=' + v.pid + '">编辑</a>&nbsp;&nbsp;' +
            '<a  class=" ajax-get" href="{:U("Category/changeStatus")}&method=resumecategory&id=' + v.id + '">启用</a>&nbsp;&nbsp;' +
            '<a class=" ajax-get"  href="{:U("Category/changeStatus")}&method=forbidcategory&id=' + v.id + '">禁用</a>&nbsp;&nbsp;' +
            '<a class="confirm ajax-get" href="{:U("Category/changeStatus")}&method=deletecategory&id=' + v.id + '">删除</a>&nbsp;&nbsp;' +
            '<td>' +
            '</tr>'
            if (v._child) {
                digui(v._child, level + 1);
            }
        })
    }
    digui(arrTree);
    $('#table-header').after(string);

    baseJs();
</script>

